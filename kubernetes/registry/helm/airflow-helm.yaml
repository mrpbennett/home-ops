# apiVersion: argoproj.io/v1alpha1
# kind: Application
# metadata:
#   name: &chart-name airflow
#   namespace: argocd
# spec:
#   destination:
#     server: "https://kubernetes.default.svc"
#     namespace: *chart-name
#   project: k3s
#   source:
#     chart: *chart-name
#     repoURL: https://airflow.apache.org
#     targetRevision: 1.15.0
#     helm:
#       valuesObject:
#         # Airflow Worker Config
#         workers:
#           replicas: 1
#           persistence:
#             enabled: true

#         # Airflow Triggerer Config
#         triggerer:
#           persistence:
#             enabled: true

#         # Airflow create user job settings
#         createUserJob:
#           useHelmHooks: false
#           applyCustomEnv: false

#         # Airflow database migration job settings
#         migrateDatabaseJob:
#           useHelmHooks: false
#           applyCustomEnv: false

#           jobAnnotations:
#             "argocd.argoproj.io/hook": Sync

#   syncPolicy:
#     automated:
#       prune: true
#       selfHeal: true
#     syncOptions:
#       - CreateNamespace=true
