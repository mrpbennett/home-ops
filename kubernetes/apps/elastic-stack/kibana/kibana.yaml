apiVersion: kibana.k8s.elastic.co/v1
kind: Kibana
metadata:
  name: kibana
spec:
  version: 8.15.3
  count: 1

  podTemplate:
    spec:
      containers:
        - name: kibana
          env:
            - name: NODE_OPTIONS
              value: "--max-old-space-size=2048"
          resources:
            requests:
              memory: 1Gi
              cpu: 0.5
            limits:
              memory: 2.5Gi
              cpu: 2

  elasticsearchRef:
    name: es70ld
    namespace: elastic-stack

  config:
    elasticsearch.hosts:
      - http://192.168.5.54:9200
    elasticsearch.username: admin
  secureSettings:
    - secretName: kibana-elasticsearch-credentials

  http:
    service:
      spec:
        type: LoadBalancer

    tls:
      selfSignedCertificate:
        disabled: true
